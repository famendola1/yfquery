package yfquery

import "testing"

func TestPlayersQuery(t *testing.T) {
	testQueries(t,
		[]testQueryPair{
			{
				Players(),
				"/players",
			},
			{
				Players().Keys([]string{"253.p.7569", "253.p.4365"}),
				"/players;player_keys=253.p.7569,253.p.4365",
			},
			{
				Players().Key("253.p.4365"),
				"/players;player_keys=253.p.4365",
			},
			{
				Players().Key("253.p.4365").Key("253.p.7569"),
				"/players;player_keys=253.p.7569",
			},
			{
				Players().Position("PG"),
				"/players;position=PG",
			},
			{
				Players().Status(PlayerStatusAvailable),
				"/players;status=A",
			},
			{
				Players().Search("Kevin Durant"),
				"/players;search=Kevin+Durant",
			},
			{
				Players().Sort(PlayerSortCriteriaName),
				"/players;sort=NAME",
			},
			{
				Players().SortByStat(5),
				"/players;sort=5",
			},
			{
				Players().SortType("season"),
				"/players;sort_type=season",
			},
			{
				Players().SortSeason(2022),
				"/players;sort_season=2022",
			},
			{
				Players().SortDate("2006-10-06"),
				"/players;sort_date=2006-10-06",
			},
			{
				Players().SortWeek(3),
				"/players;sort_week=3",
			},
			{
				Players().Start(25),
				"/players;start=25",
			},
			{
				Players().Count(50),
				"/players;count=50",
			},
			{
				Players().Key("253.p.4365").Ownership(),
				"/players;player_keys=253.p.4365/ownership",
			},
			{
				Players().Key("253.p.4365").PercentOwned(),
				"/players;player_keys=253.p.4365/percent_owned",
			},
			{
				Players().Key("253.p.4365").DraftAnalysis(),
				"/players;player_keys=253.p.4365/draft_analysis",
			},
			{
				Players().Key("253.p.4365").Ownership().PercentOwned(),
				"/players;player_keys=253.p.4365;out=ownership,percent_owned",
			},
			{
				Players().Key("253.p.4365").StatsWithDefaults(),
				"/players;player_keys=253.p.4365/stats",
			},
			{
				Players().Key("253.p.4365").Stats().LastWeek(),
				"/players;player_keys=253.p.4365/stats;type=lastweek",
			},
		})
}

func TestPlayerQuery(t *testing.T) {
	testQueries(t,
		[]testQueryPair{
			{
				Player(),
				"/player",
			},
			{
				Player().Key("253.p.4365"),
				"/player/253.p.4365",
			},
			{
				Player().Key("253.p.4365").Key("253.p.7569"),
				"/player/253.p.7569",
			},
			{
				Player().Key("253.p.4365").Stats().LastWeek(),
				"/player/253.p.4365/stats;type=lastweek",
			},
			{
				Player().Key("253.p.4365").Ownership(),
				"/player/253.p.4365/ownership",
			},
			{
				Player().Key("253.p.4365").PercentOwned(),
				"/player/253.p.4365/percent_owned",
			},
			{
				Player().Key("253.p.4365").DraftAnalysis(),
				"/player/253.p.4365/draft_analysis",
			},
			{
				Player().Key("253.p.4365").StatsWithDefaults(),
				"/player/253.p.4365/stats",
			},
			{
				Player().Key("253.p.4365").Stats().LastWeek(),
				"/player/253.p.4365/stats;type=lastweek",
			},
		})
}
